<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Pokémon Login & Search con reCAPTCHA v2</title>

  <!-- 1) Carga la librería de reCAPTCHA v2 -->
  <script src="https://www.google.com/recaptcha/api.js" async defer></script>

  <style>
    /* ... tu CSS existente ... */
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      display: flex; flex-direction: column;
      justify-content: center; align-items: center;
      height: 100vh; background: #f7f7f7;
      font-family: Arial, sans-serif;
    }
    #login-container, #search-container {
      background: #fff; padding: 20px 30px;
      border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      text-align: center; width: 300px;
    }
    .fade-out { animation: fadeOut 0.5s forwards; }
    @keyframes fadeOut { to { opacity:0; transform:scale(0.95); } }
    input, button { width:100%; padding:8px; margin:8px 0;
      border:1px solid #ccc; border-radius:4px; }
    button {
      background:#4CAF50; color:#fff; border:none;
      cursor:pointer; padding:10px;
    }
    button:hover { background:#45a049; }
    #pokemon-result img { max-width:150px; margin:10px auto; display:block; }
    #pokemon-result p { margin:5px 0; }
  </style>
</head>
<body>

  <!-- Login con reCAPTCHA v2 -->
  <div id="login-container">
    <h2>Login</h2>
    <form id="login-form">
      <label for="email">Email:</label>
      <input id="email" type="email" required />

      <label for="password">Password:</label>
      <input id="password" type="password" required />

      <!-- 2) Aquí se muestra el widget reCAPTCHA v2 -->
      <div class="g-recaptcha"
           data-sitekey="6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI">
      </div>

      <button type="submit">Login</button>
    </form>
  </div>

  <!-- Búsqueda de Pokémon (oculto hasta login) -->
  <div id="search-container" style="display:none;">
    <h2>Search Pokémon</h2>
    <input id="pokemon-name" type="text" placeholder="Enter Pokémon name" />
    <button id="search-button">Search</button>
    <div id="pokemon-result"></div>
  </div>

  <script>
    document.getElementById('login-form')
      .addEventListener('submit', function(e) {
      e.preventDefault();

      // 3) Comprueba que el usuario resolvió el CAPTCHA
      const captchaResponse = grecaptcha.getResponse();
      if (!captchaResponse) {
        alert('Por favor, completa el captcha antes de continuar.');
        return;
      }

      // Si todo OK, simula el login
      const email = document.getElementById('email').value.trim();
      const pass  = document.getElementById('password').value.trim();

      if (email && pass) {
        const loginBox = document.getElementById('login-container');
        loginBox.classList.add('fade-out');
        setTimeout(() => {
          loginBox.style.display = 'none';
          document.getElementById('search-container').style.display = 'block';
        }, 500);
      } else {
        alert('Please enter both email and password.');
      }
    });

    // Lógica de búsqueda de Pokémon (sin cambios)
    document.getElementById('search-button').addEventListener('click', () => {
      const name = document.getElementById('pokemon-name').value
                     .trim().toLowerCase();
      const result = document.getElementById('pokemon-result');
      result.innerHTML = '';

      if (!name) {
        alert('Please enter a Pokémon name.');
        return;
      }

      fetch(`https://pokeapi.co/api/v2/pokemon/${name}`)
        .then(r => {
          if (!r.ok) throw new Error();
          return r.json();
        })
        .then(data => {
          const nameEl   = document.createElement('p');
          const imgEl    = document.createElement('img');
          const typesEl  = document.createElement('p');
          const weightEl = document.createElement('p');
          const heightEl = document.createElement('p');

          nameEl.textContent   = data.name.toUpperCase();
          imgEl.src            = data.sprites.front_default;
          typesEl.textContent  = 'Types: ' +
                                 data.types.map(t=>t.type.name).join(', ');
          weightEl.textContent = 'Weight: ' + data.weight;
          heightEl.textContent = 'Height: ' + data.height;

          result.append(nameEl, imgEl, typesEl, weightEl, heightEl);
        })
        .catch(() => {
          result.textContent = 'Pokémon not found. Please try another name.';
        });
    });
  </script>
</body>
</html>
